(this.webpackJsonpcovid19kashmir=this.webpackJsonpcovid19kashmir||[]).push([[23],{230:function(t,e,n){"use strict";n.r(e);var i=n(104),c=n(46),s=n(11),a=n(2),r={root:null,rootMargin:"0px 0px 0px 0px",threshold:0},l=function(t){var e=Object(a.useState)(!1),n=Object(c.a)(e,2),i=n[0],s=n[1];return Object(a.useEffect)((function(){t.current&&new IntersectionObserver((function(e,n){e.forEach((function(e){e.isIntersecting&&(s(!0),n.unobserve(t.current))}))}),r).observe(t.current)}),[t]),i},d=n(23),o=n(94),j=n(93),u=n.n(j),b=n(65),O=n(197),v=n(159),h=n(232),f=n(196),m=n(142),x=n(21),p=Object(a.lazy)((function(){return Object(d.j)((function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,233))}))})),g=Object(a.lazy)((function(){return Object(d.j)((function(){return n.e(20).then(n.bind(null,224))}))})),y=Object(a.lazy)((function(){return Object(d.j)((function(){return n.e(14).then(n.bind(null,202))}))})),N=Object(a.lazy)((function(){return Object(d.j)((function(){return n.e(18).then(n.bind(null,203))}))})),k=Object(a.lazy)((function(){return Object(d.j)((function(){return Promise.all([n.e(2),n.e(11),n.e(15)]).then(n.bind(null,225))}))})),w=Object(a.lazy)((function(){return Object(d.j)((function(){return n.e(16).then(n.bind(null,204))}))})),C=Object(a.lazy)((function(){return Object(d.j)((function(){return Promise.all([n.e(0),n.e(8),n.e(22)]).then(n.bind(null,205))}))})),M=Object(a.lazy)((function(){return Object(d.j)((function(){return n.e(24).then(n.bind(null,207))}))})),J=Object(a.lazy)((function(){return Object(d.j)((function(){return Promise.all([n.e(2),n.e(17)]).then(n.bind(null,227))}))}));function S(){var t,e,n,r,j,S=Object(h.a)().t,K="JK",z=Object(f.a)("mapStatistic","active"),D=Object(c.a)(z,2),I=D[0],R=D[1],U=Object(a.useState)(!1),P=Object(c.a)(U,2),H=P[0],E=P[1],F=Object(a.useState)({stateCode:K,districtName:null}),T=Object(c.a)(F,2),V=T[0],W=T[1],B=Object(a.useState)(!1),L=Object(c.a)(B,2),q=L[0],A=L[1];Object(a.useEffect)((function(){V.stateCode!==K&&(W({stateCode:K,districtName:null}),E(!1))}),[V.stateCode,K]);var G=Object(m.a)("".concat(s.c,"/timeseries-").concat(K,".min.json"),d.b,{revalidateOnMount:!0,refreshInterval:1e5}),Q=G.data,X=G.error,Y=Object(m.a)("".concat(s.c,"/data.min.json"),d.b,{revalidateOnMount:!0,refreshInterval:1e5}).data;console.log(null===Y||void 0===Y?void 0:Y.JK);var Z=null===Y||void 0===Y?void 0:Y.JK,$=Object(a.useMemo)((function(){if(Z){var t=window.innerWidth>=540?3:2,e=(null===Z||void 0===Z?void 0:Z.districts)?Object.keys(Z.districts).filter((function(t){return"Unknown"!==t})).length:0;return Math.ceil(e/t)}}),[Z]),_=Object(a.useRef)(),tt=l(_),et=Object(a.useMemo)((function(){var t=[];return[0,0,0,0].map((function(e,n){return t.push({animationDelay:"".concat(250*n,"ms")}),null})),t}),[]),nt=H?window.innerWidth>=540?10:8:6,it=Object(a.useMemo)((function(){var t,e,n,i,c,s=[null===Z||void 0===Z||null===(t=Z.meta)||void 0===t?void 0:t.date,null===Z||void 0===Z||null===(e=Z.meta)||void 0===e||null===(n=e.tested)||void 0===n?void 0:n.date,null===Z||void 0===Z||null===(i=Z.meta)||void 0===i||null===(c=i.vaccinated)||void 0===c?void 0:c.date].filter((function(t){return t}));return s.length>0?Object(b.a)(Object(O.a)(s.map((function(t){return Object(d.i)(t)}))),{representation:"date"}):null}),[Z]),ct=s.k.includes(I)?I:"confirmed",st=Object(a.useMemo)((function(){var t;return!!((null===Z||void 0===Z?void 0:Z.districts)&&(null===(t=Z.districts)||void 0===t?void 0:t[s.w])&&s.p.every((function(t){return Object(d.g)(Z,"total",t)===Object(d.g)(Z.districts[s.w],"total",t)})))}),[Z]),at=s.t[ct],rt=(null===V||void 0===V?void 0:V.districtName)&&V.districtName!==s.w&&st,lt=Object.keys((!st||!at.hasPrimary)&&(null===Z||void 0===Z?void 0:Z.districts)||{});return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(v.a,{children:[Object(x.jsxs)("title",{children:["Coronavirus Outbreak in ",s.s.JK," - covid19kashmir.org"]}),Object(x.jsx)("meta",{name:"title",content:"Coronavirus Outbreak in ".concat(s.s.JK,": Latest Map and Case Count")})]}),Object(x.jsxs)("div",{className:"State",children:[Object(x.jsxs)("div",{className:"state-left",children:[Object(x.jsx)(M,{data:Z,stateCode:K}),Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)(w,{mapStatistic:I,setMapStatistic:R}),Object(x.jsx)(y,{data:Z}),Object(x.jsx)(C,{timeseries:null===Q||void 0===Q||null===(t=Q.JK)||void 0===t?void 0:t.dates,stateCode:K,forceRender:!!X})]}),(null===Z||void 0===Z||null===(e=Z.total)||void 0===e?void 0:e.vaccinated1)&&Object(x.jsx)(N,{data:Z}),Y&&Object(x.jsx)(a.Suspense,{fallback:Object(x.jsx)("div",{style:{minHeight:"50rem"}}),children:Object(x.jsx)(k,{stateCode:K,data:Y,regionHighlighted:V,setRegionHighlighted:W,mapStatistic:I,setMapStatistic:R,lastDataDate:it,delta7Mode:q,setDelta7Mode:A,noRegionHighlightedDistrictData:rt,noDistrictData:st})}),Object(x.jsx)("span",{ref:_}),tt&&Y&&Object(x.jsx)(a.Suspense,{fallback:Object(x.jsx)("div",{}),children:Object(x.jsx)(J,{stateCode:K,data:Y,timeseries:null===Q||void 0===Q||null===(n=Q.JK)||void 0===n?void 0:n.dates})})]}),Object(x.jsx)("div",{className:"state-right",children:Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"district-bar",children:[Object(x.jsxs)("div",{className:u()("district-bar-top",{expanded:H}),children:[Object(x.jsxs)("div",{className:"district-bar-left",children:[Object(x.jsx)("h2",{className:u()(ct,"fadeInUp"),style:et[0],children:S("Top districts")}),Object(x.jsx)("div",{className:"districts fadeInUp ".concat(H?"is-grid":""),style:H?Object(i.a)({gridTemplateRows:"repeat(".concat($,", 2rem)")},et[1]):et[1],children:lt.filter((function(t){return"Unknown"!==t})).sort((function(t,e){return function(t,e){var n=Z.districts[t],i=Z.districts[e];return Object(d.g)(i,"total",I)-Object(d.g)(n,"total",I)}(t,e)})).slice(0,H?void 0:5).map((function(t){var e=Object(d.g)(Z.districts[t],"total",ct),n=Object(d.g)(Z.districts[t],"delta",ct);return Object(x.jsxs)("div",{className:"district",children:[Object(x.jsx)("h2",{children:Object(d.e)(e)}),Object(x.jsx)("h5",{children:S(t)}),"active"!==ct&&Object(x.jsx)("div",{className:"delta",children:Object(x.jsx)("h6",{className:ct,children:n>0?"\u2191"+Object(d.e)(n):""})})]},t)}))})]}),Object(x.jsxs)("div",{className:"district-bar-right fadeInUp",style:et[2],children:[Q&&("confirmed"===ct||"deceased"===ct)&&Object(x.jsx)("div",{className:"happy-sign",children:Object.keys((null===(r=Q.JK)||void 0===r?void 0:r.dates)||{}).slice(-nt).every((function(t){return 0===Object(d.g)(Q.JK.dates[t],"delta",ct)}))&&Object(x.jsxs)("div",{className:"alert ".concat("confirmed"===ct?"is-green":""),children:[Object(x.jsx)(o.l,{}),Object(x.jsxs)("div",{className:"alert-right",children:["No new ",ct," cases in the past five days"]})]})}),Object(x.jsx)(p,{timeseries:null===Q||void 0===Q||null===(j=Q.JK)||void 0===j?void 0:j.dates,statistic:ct,stateCode:K,lookback:nt,forceRender:!!X})]})]}),Object(x.jsx)("div",{className:"district-bar-bottom",children:lt.length>5?Object(x.jsx)("button",{className:"button fadeInUp",onClick:function(){E(!H)},style:et[3],children:Object(x.jsx)("span",{children:S(H?"View less":"View all")})}):Object(x.jsx)("div",{style:{height:"3.75rem",flexBasis:"15%"}})})]})})})]}),Object(x.jsx)(g,{})]})}e.default=Object(a.memo)(S)}}]);
//# sourceMappingURL=23.35cf8e69.chunk.js.map