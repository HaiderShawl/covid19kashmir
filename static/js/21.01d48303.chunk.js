(this.webpackJsonpcovid19kashmir=this.webpackJsonpcovid19kashmir||[]).push([[21],{141:function(e,t,n){"use strict";var i=n(46),c=n(2),s={root:null,rootMargin:"0px 0px 0px 0px",threshold:0};t.a=function(e){var t=Object(c.useState)(!1),n=Object(i.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){e.current&&new IntersectionObserver((function(t,n){t.forEach((function(t){t.isIntersecting&&(r(!0),n.unobserve(e.current))}))}),s).observe(e.current)}),[e]),a}},221:function(e,t,n){"use strict";n.r(t);var i=n(107),c=n(46),s=n(11),a=n(141),r=n(24),l=n(97),d=n(95),o=n.n(d),j=n(66),u=n(223),b=n(2),O=n(176),v=n(251),h=n(222),f=n(159),m=n(21),x=Object(b.lazy)((function(){return Object(r.j)((function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,180))}))})),g=Object(b.lazy)((function(){return Object(r.j)((function(){return n.e(24).then(n.bind(null,201))}))})),p=Object(b.lazy)((function(){return Object(r.j)((function(){return n.e(18).then(n.bind(null,189))}))})),y=Object(b.lazy)((function(){return Object(r.j)((function(){return n.e(23).then(n.bind(null,190))}))})),N=Object(b.lazy)((function(){return Object(r.j)((function(){return Promise.all([n.e(2),n.e(13),n.e(19)]).then(n.bind(null,202))}))})),k=Object(b.lazy)((function(){return Object(r.j)((function(){return n.e(20).then(n.bind(null,193))}))})),C=Object(b.lazy)((function(){return Object(r.j)((function(){return Promise.all([n.e(0),n.e(1),n.e(16)]).then(n.bind(null,194))}))})),w=Object(b.lazy)((function(){return Object(r.j)((function(){return n.e(26).then(n.bind(null,195))}))})),M=Object(b.lazy)((function(){return Object(r.j)((function(){return Promise.all([n.e(2),n.e(22)]).then(n.bind(null,204))}))})),S=Object(b.lazy)((function(){return Object(r.j)((function(){return n.e(15).then(n.bind(null,205))}))}));function J(){var e,t,n,d,J,z=Object(v.a)().t,D="JK",K=Object(h.a)("mapStatistic","active"),R=Object(c.a)(K,2),I=R[0],H=R[1],U=Object(b.useState)(!1),P=Object(c.a)(U,2),A=P[0],E=P[1],F=Object(b.useState)({stateCode:D,districtName:null}),T=Object(c.a)(F,2),V=T[0],W=T[1],q=Object(b.useState)(!1),B=Object(c.a)(q,2),L=B[0],G=B[1];Object(b.useEffect)((function(){V.stateCode!==D&&(W({stateCode:D,districtName:null}),E(!1))}),[V.stateCode,D]);var Q=Object(f.a)("".concat(s.d,"/timeseries-").concat(D,".min.json"),r.b,{revalidateOnMount:!0,refreshInterval:1e5}),X=Q.data,Y=Q.error,Z=Object(f.a)("".concat(s.d,"/data.min.json"),r.b,{revalidateOnMount:!0,refreshInterval:1e5}).data,$=null===Z||void 0===Z?void 0:Z.JK,_=Object(b.useMemo)((function(){if($){var e=window.innerWidth>=540?3:2,t=(null===$||void 0===$?void 0:$.districts)?Object.keys($.districts).filter((function(e){return"Unknown"!==e})).length:0;return Math.ceil(t/e)}}),[$]),ee=Object(b.useRef)(),te=Object(a.a)(ee),ne=Object(b.useMemo)((function(){var e=[];return[0,0,0,0].map((function(t,n){return e.push({animationDelay:"".concat(250*n,"ms")}),null})),e}),[]),ie=A?window.innerWidth>=540?10:8:6,ce=Object(b.useMemo)((function(){var e,t,n,i,c,s=[null===$||void 0===$||null===(e=$.meta)||void 0===e?void 0:e.date,null===$||void 0===$||null===(t=$.meta)||void 0===t||null===(n=t.tested)||void 0===n?void 0:n.date,null===$||void 0===$||null===(i=$.meta)||void 0===i||null===(c=i.vaccinated)||void 0===c?void 0:c.date].filter((function(e){return e}));return s.length>0?Object(j.a)(Object(u.a)(s.map((function(e){return Object(r.i)(e)}))),{representation:"date"}):null}),[$]),se=s.l.includes(I)?I:"confirmed",ae=Object(b.useMemo)((function(){var e;return!!((null===$||void 0===$?void 0:$.districts)&&(null===(e=$.districts)||void 0===e?void 0:e[s.A])&&s.q.every((function(e){return Object(r.g)($,"total",e)===Object(r.g)($.districts[s.A],"total",e)})))}),[$]),re=s.u[se],le=(null===V||void 0===V?void 0:V.districtName)&&V.districtName!==s.A&&ae,de=Object.keys((!ae||!re.hasPrimary)&&(null===$||void 0===$?void 0:$.districts)||{});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(O.a,{children:[Object(m.jsxs)("title",{children:["Coronavirus Outbreak in ",s.t.JK," - covid19kashmir.org"]}),Object(m.jsx)("meta",{name:"title",content:"Coronavirus Outbreak in ".concat(s.t.JK,": Latest Map and Case Count")})]}),Object(m.jsxs)("div",{className:"State",children:[Object(m.jsxs)("div",{className:"state-left",children:[Object(m.jsx)(w,{data:$,stateCode:D}),Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)(k,{mapStatistic:I,setMapStatistic:H}),Object(m.jsx)(p,{data:$}),Object(m.jsx)(C,{timeseries:null===X||void 0===X||null===(e=X.JK)||void 0===e?void 0:e.dates,stateCode:D,forceRender:!!Y})]}),(null===$||void 0===$||null===(t=$.total)||void 0===t?void 0:t.vaccinated1)&&Object(m.jsx)(y,{data:$}),Z&&Object(m.jsx)(b.Suspense,{fallback:Object(m.jsx)("div",{style:{minHeight:"50rem"}}),children:Object(m.jsx)(N,{stateCode:D,data:Z,regionHighlighted:V,setRegionHighlighted:W,mapStatistic:I,setMapStatistic:H,lastDataDate:ce,delta7Mode:L,setDelta7Mode:G,noRegionHighlightedDistrictData:le,noDistrictData:ae})}),Object(m.jsx)("span",{ref:ee}),te&&Z&&Object(m.jsx)(b.Suspense,{fallback:Object(m.jsx)("div",{}),children:Object(m.jsx)(M,{stateCode:D,data:Z,timeseries:null===X||void 0===X||null===(n=X.JK)||void 0===n?void 0:n.dates})})]}),Object(m.jsx)("div",{className:"state-right",children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"district-bar",children:[Object(m.jsxs)("div",{className:o()("district-bar-top",{expanded:A}),children:[Object(m.jsxs)("div",{className:"district-bar-left",children:[Object(m.jsx)("h2",{className:o()(se,"fadeInUp"),style:ne[0],children:z("Top districts")}),Object(m.jsx)("div",{className:"districts fadeInUp ".concat(A?"is-grid":""),style:A?Object(i.a)({gridTemplateRows:"repeat(".concat(_,", 2rem)")},ne[1]):ne[1],children:de.filter((function(e){return"Unknown"!==e})).sort((function(e,t){return function(e,t){var n=$.districts[e],i=$.districts[t];return Object(r.g)(i,"total",I)-Object(r.g)(n,"total",I)}(e,t)})).slice(0,A?void 0:5).map((function(e){var t=Object(r.g)($.districts[e],"total",se),n=Object(r.g)($.districts[e],"delta",se);return Object(m.jsxs)("div",{className:"district",children:[Object(m.jsx)("h2",{children:Object(r.e)(t)}),Object(m.jsx)("h5",{children:z(e)}),"active"!==se&&Object(m.jsx)("div",{className:"delta",children:Object(m.jsx)("h6",{className:se,children:n>0?"\u2191"+Object(r.e)(n):""})})]},e)}))})]}),Object(m.jsxs)("div",{className:"district-bar-right fadeInUp",style:ne[2],children:[X&&("confirmed"===se||"deceased"===se)&&Object(m.jsx)("div",{className:"happy-sign",children:Object.keys((null===(d=X.JK)||void 0===d?void 0:d.dates)||{}).slice(-ie).every((function(e){return 0===Object(r.g)(X.JK.dates[e],"delta",se)}))&&Object(m.jsxs)("div",{className:"alert ".concat("confirmed"===se?"is-green":""),children:[Object(m.jsx)(l.m,{}),Object(m.jsxs)("div",{className:"alert-right",children:["No new ",se," cases in the past five days"]})]})}),Object(m.jsx)(x,{timeseries:null===X||void 0===X||null===(J=X.JK)||void 0===J?void 0:J.dates,statistic:se,stateCode:D,lookback:ie,forceRender:!!Y})]})]}),Object(m.jsx)("div",{className:"district-bar-bottom",children:de.length>5?Object(m.jsx)("button",{className:"button fadeInUp",onClick:function(){E(!A)},style:ne[3],children:Object(m.jsx)("span",{children:z(A?"View less":"View all")})}):Object(m.jsx)("div",{style:{height:"3.75rem",flexBasis:"15%"}})})]}),Object(m.jsx)(b.Suspense,{fallback:Object(m.jsx)("div",{}),children:Object(m.jsx)(S,{stateCode:D,timeseries:X,regionHighlighted:V,setRegionHighlighted:W,noRegionHighlightedDistrictData:le,forceRender:!!Y})})]})})]}),Object(m.jsx)(g,{})]})}t.default=Object(b.memo)(J)}}]);
//# sourceMappingURL=21.01d48303.chunk.js.map